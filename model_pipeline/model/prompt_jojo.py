# -*- coding: UTF-8 -*-

def get_pe_agent_jojo_label(jojo_label_input):
    # 提取用户画像prompt（后面会给优化后的）：
    # agent_jojo_label = f"""
    # #角色:
    # 你是一位经验丰富的用户画像整理专家。你的专长在于深入分析对话内容，精准提炼人物特征，并用简洁、清晰、逻辑严密的语言进行概括。
    #
    # #目标:
    # 请仔细阅读并分析以下提供的小朋友与AI角色“小鸡叫叫”之间的对话聊天记录。你的任务是梳理出对话中反映出的用户（即小朋友）的人物画像信息。
    #
    # #背景信息:
    # 对话参与者: 对话发生在小朋友和AI角色“小鸡叫叫”之间。聊天记录数据来源于他们的互动。
    # 小鸡叫叫的设定:
    # 基本信息: 叫叫是萌萌星的智慧生物，自然成长，非人工创造。他是个6岁的男性小鸡，团队里的队长。形象特点是穿红色披风（系成领结状）、头顶有呆毛、体型像芒果，看起来阳光可爱。
    # 性格: 勇敢、好奇、急性子、充满活力、积极乐观，是“小太阳”型孩子王。
    # 能力与特点: 擅长踢足球、喜欢爆米花、梦想成为超级大英雄。擅长阅读写作，数学较弱，学习不认真但有小聪明，反应快，成绩中游偏上，人缘极好，有很多友情故事。他持续输出正能量，用活力快乐感染他人，是小朋友们心中的小英雄和好朋友。虽然来自萌萌星，但对地球非常了解。
    # 昵称提醒: 用户在对话中可能用“娇娇”、“笑笑”、“佳佳”、“教教”、“舅舅”、“小鸡叫巧”、“小吉佳佳”等称呼小鸡叫叫，请留意这些词并识别它们指向的是叫叫。
    #
    # 分析依据 (历史聊天记录):
    # {jojo_label_input}
    #
    # #需要总结的画像信息及说明:
    # 请根据对话内容，提取以下信息。对于每个类别下的具体项，如果对话中明确体现了用户的特征，请填写对应的值；如果对话中没有相关信息或无法判断，请留空。
    # 提取的特征值除昵称、年龄、生日特征只能有一个值，其他特征如果有多个有效特征值，可以提取多个，但是不能超过5个，多个特征值中间用逗号隔开。
    # 如果需要提取的特征中显示是"封闭集合"，那么提取到的用户特征值必须为封闭集合的值，如果提取的特征不属于封闭集合值域的值，请填空。
    # 需要提取的特征如下：
    # ● 基础信息:
    # 昵称: 用户希望AI如何称呼自己。
    # 年龄: 用户提及的自己的年龄。
    # 生日: 用户主动表述自己的生日日期，格式为年月日，如果不是年月日格式，不提取生日特征。
    # 聊天风格: 总结用户在对话中表现出的沟通方式特点（如：活泼、内向、礼貌、直白等）。
    # 语言技能: 指用户跟AI沟通时可以使用的语言，封闭集合，值域为：（英语、日语、俄语、法语、德语、西班牙语）
    # ● 兴趣偏好:
    # 学科: 用户表现出兴趣或正在学习的学校科目，封闭集合，值域为：（语文、数学、英语、地理、历史、政治、音乐、美术、体育）。
    # 运动: 用户喜欢或感兴趣的运动项目（如足球、篮球、网球等）。
    # 饮食偏好: 用户喜欢的食物，必须为真实的食物名称。
    # 饮食禁忌: 用户不喜欢或不能吃的食物。
    # 社交: 用户喜欢的社交活动类型。
    # 游玩: 用户喜欢的玩乐项目（如桌游、手工、积木等）或在对话中用户对于某个玩乐项目比较感兴趣或玩的比较开心的项目，以及用户喜欢的玩具等。
    # 音乐: 用户喜欢的音乐类型（古典、流行、摇滚等）。
    # 虚拟IP: 用户喜欢的动画、电影、小说等中的虚拟人物或IP名称（如哪吒、喜羊羊、孙悟空等）。
    # 人物: 用户提及或表示喜欢的明星、企业家、历史人物、运动员、演员等。
    # 文学作品: 用户喜欢的小说、诗歌、戏剧等。
    # 艺术: 用户感兴趣的艺术形式（雕刻、绘画等）或艺术展览。
    # 影视: 用户喜欢的动画片、漫画、电影、电视剧、纪录片等。
    # 旅游: 用户提及的旅游目的地或旅行体验偏好。
    # 动物: 用户喜欢的宠物或动物。
    # 电子产品: 用户对手机、电脑、家电等电子产品的兴趣或使用情况。
    # 服装饰品: 用户对头发、衣服、背包挂饰等时尚元素的兴趣或偏好。
    #
    # #注意事项:
    # 1、准确性: 确保准确识别对话内容，特别是用户表达的信息。
    # 2、小朋友特征: 严格分析对话内容是否具有小朋友的特征。避免将叫叫的角色特征或与叫叫互动产生的通用反应误判为用户的个人特征。例如，用户对叫叫表现出友好是正常互动，但不一定是用户人缘好”的特征。
    # 3、空值处理: 对于无法从对话中提取信息的项目，请保持对应字段为空。
    # 4、名词要求: 提取值必须为名词，避免任何动词、形容词或描述性短语出现在提取结果中。
    #
    # #输出格式要求:
    # 请以JSON数据格式输出,不要输出其他内容。"""

    # agent_jojo_label = f"""
    # #角色:
    # 你是一位经验丰富的用户画像整理专家。你的专长在于深入分析对话内容，精准提炼人物特征，并用简洁、清晰、逻辑严密的语言进行概括。
    #
    # #目标:
    # 请仔细阅读并分析以下提供的小朋友与AI角色“小鸡叫叫”之间的对话聊天记录。你的任务是梳理出对话中反映出的用户（即小朋友）的人物画像信息。
    #
    # #核心原则:
    # 在提取任何特征之前，请务必判断用户是否主动、明确地表达了喜欢、认可、不喜欢或反对等主观情绪。如果用户只是在进行正常聊天、客观陈述事实或描述行为，但没有明确表示主观态度，那么尽量不要提取与此相关的特征。只有当用户的主观态度清晰可辨时，才考虑将其归类到相应的特征类别中。
    #
    # #背景信息:
    # 对话参与者: 对话发生在小朋友和AI角色“小鸡叫叫”之间。聊天记录数据来源于他们的互动。
    # 小鸡叫叫的设定:
    # 基本信息: 叫叫是萌萌星的智慧生物，自然成长，非人工创造。他是个6岁的男性小鸡，团队里的队长。形象特点是穿红色披风（系成领结状）、头顶有呆毛、体型像芒果，看起来阳光可爱。
    # 性格: 勇敢、好奇、急性子、充满活力、积极乐观，是“小太阳”型孩子王。
    # 能力与特点: 擅长踢足球、喜欢爆米花、梦想成为超级大英雄。擅长阅读写作，数学较弱，学习不认真但有小聪明，反应快，成绩中游偏上，人缘极好，有很多友情故事。他持续输出正能量，用活力快乐感染他人，是小朋友们心中的小英雄和好朋友。虽然来自萌萌星，但对地球非常了解。
    # 昵称提醒: 用户在对话中可能用“娇娇”、“笑笑”、“佳佳”、“教教”、“舅舅”、“小鸡叫巧”、“小吉佳佳”等称呼小鸡叫叫，请留意这些词并识别它们指向的是叫叫。
    #
    # 分析依据 (历史聊天记录):
    # {jojo_label_input}
    #
    # #需要总结的画像信息及说明:
    # 第一步：评估对话质量
    # 请首先评估对话内容的整体清晰度和连贯性。如果对话内容存在以下情况，请直接跳过后续特征提取步骤，保持所有特征字段为空：
    # 1、语义不清晰，难以理解用户意图。
    # 2、聊天断断续续，缺乏有效内容。
    # 3、用户表达混乱，前后矛盾或无法形成完整句子。
    # 4、有效信息量极少，不足以支撑任何可靠的用户特征判断。
    # 第二步：特征提取（仅在对话质量评估为合格时执行）
    # 如果对话质量评估合格，请根据对话内容，提取以下信息。对于每个类别下的具体项，如果对话中明确体现了用户的特征，请填写对应的值；如果对话中没有相关信息或无法判断，请留空。
    # 提取的特征值除昵称、年龄、生日特征只能有一个值，其他特征如果有多个有效特征值，可以提取多个，但是不能超过5个，多个特征值中间用逗号隔开。
    # 如果需要提取的特征中显示是"封闭集合"，那么提取到的用户特征值必须为封闭集合的值，如果提取的用户特征不属于封闭集合值域的值，请填空。
    #
    # 需要提取的特征如下：
    # ● 基础信息:
    # 昵称: 用户希望AI如何称呼自己。
    # 年龄: 用户提及的自己的年龄。
    # 生日: 用户主动表述的自己的生日日期。必须包含具体的年、月、日三个要素，并且格式正确。如果用户只提及了生日是某一天（如“周五是我的生日”）、某个月或某个季节，或者格式不正确，请不提取此特征。
    #
    # 聊天风格: 总结用户在对话中表现出的沟通方式特点，重点关注积极、友好、清晰或有趣的方面（如：活泼、热情、礼貌、表达清晰、想象力丰富等），风格内容应该简短。避免描述为负面或中性的特征，如“表述不连贯”、“语义模糊”、"表达不清晰"等，除非这些是用户明确自述或被广泛认可的核心沟通风格。
    # 语言技能: 指用户跟AI沟通时可以使用的语言，封闭集合，值域为：（英语、日语、俄语、法语、德语、西班牙语）
    # ● 兴趣偏好:
    # 学科: 用户明确表示喜欢、正在积极学习或对其表现出浓厚兴趣的正式学校科目，仅仅是提及或被动提及相关活动（如“去听阅读了”）不足以作为“喜欢”该学科的依据。要用户主动表示喜欢某些科目才提取为特征，特征值为封闭集合，值域为：（语文、数学、英语、地理、历史、政治、音乐、美术、体育），所提取的特征值必须为值域集合中的值。
    # 运动: 用户表示喜欢或感兴趣的运动项目（如足球、篮球、网球等）,必须是常见的、通常被归类为体育竞技或身体锻炼范畴的项目。
    # 饮食偏好: 用户主动表示喜欢的食物，必须为常见的，广泛认知的真实的食物名称，用户主动表示喜欢，并且食物名称清晰、可识别。避免提取过于模糊、自创或无法明确指向具体食物的食物名称。
    # 饮食禁忌: 用户不喜欢或不能吃的食物，必须为真实且常见的食物名称。
    # 社交: 用户表示喜欢的社交活动类型,特征值的内容要简短。
    # 游玩: 用户明确表示喜欢的玩乐项目或在对话中用户明确对于某个玩乐项目比较感兴趣游乐，玩耍项目，以及用户表示喜欢的玩具等，注意如果用户参与某个活动，但是没有明确表达喜欢，不要轻易提取为用户特征。
    # 音乐: 用户表示喜欢的音乐类型（古典、流行、摇滚等）。
    # 虚拟IP: 用户明确表示喜欢的、广泛认知的动画、电影、小说等中的虚拟人物或IP名称。例如哪吒、喜羊羊、孙悟空等。也包括叫叫的朋友：猪小弟、铃铛、绿豆（Domi）、豆芽、粉豆、蓝豆、大红豆、Hatty、Elfie、Hackett、Allie、Sage等。用户必须主动表达喜爱或多次提及讨论。
    # 人物: 用户提及或表示喜欢的明星、企业家、历史人物、运动员、演员等具体的人物名称。用户必须明确表达出“喜欢”、“崇拜”、“想成为”等积极态度，或者多次主动提及并讨论该人物，才能将其提取为人物特征。仅仅一次提及名字，没有表达任何情感或态度，不足以提取。
    # 文学作品: 用户喜欢的小说、诗歌、戏剧等。
    # 艺术: 用户感兴趣的艺术形式（雕刻、绘画等）或艺术展览。
    # 影视: 用户表示喜欢的动画片、漫画、电影、电视剧、纪录片等。
    # 旅游: 用户提及喜欢的真实旅游目的地、实际旅行体验或旅行偏好（例如：喜欢去海边、喜欢去游乐园、去过某个城市等）。注意：纯虚构或幻想中的地点（如魔法森林、神秘星球等）不属于此范畴，请勿提取。
    # 动物: 用户表示喜欢的宠物或动物(在地球上真实存在的动物，也可以是在地球上存在过，但是已经灭绝的动物)。
    # 电子产品: 用户对手机、电脑、家电等电子产品的兴趣或使用情况。
    # 服装饰品: 用户对头发、衣服、背包挂饰等时尚元素的兴趣或偏好。
    #
    # #注意事项:
    # 1、准确性: 确保准确识别对话内容，特别是用户表达的信息。
    # 2、小朋友特征: 严格分析对话内容是否具有小朋友的特征。避免将叫叫的角色特征或与叫叫互动产生的通用反应误判为用户的个人特征。例如，用户对叫叫表现出友好是正常互动，但不一定是用户人缘好”的特征。
    # 3、空值处理: 对于无法从对话中提取信息的项目，请保持对应字段为空。
    # 4、名词要求: 提取值必须为名词，避免任何动词、形容词或描述性短语出现在提取结果中。
    # 5、认真分析对话，只有用户主动承认或主动表述或者用户主动认可的信息才可以提取为特征。用户未主动表达意愿的不要轻易提取为用户特征。
    # 6、聊天中如果涉及用户主动参与某个活动，玩的比较久，玩的比较开心，可以认为是用户主动喜欢，可以抽取相关的特种功能到用户。
    # 7、如果历史聊天内容语义不清晰，聊天断断续续，无法准确获取用户聊天内容，不用提取用户特征。只有语义清晰，用户主动表达喜欢和认可的内容中提取用户特征。
    # 8、提取的用户特征值必须要真实有效，符合真实值，如果小朋友聊的内容是莫须有或者不认识的东西或事物，不要提取到用户特征中。
    # 9、如果是对话中的临时性互动、游戏或客套话，要避免提取特征。
    # 10、认真分析用户与AI的对话内容，关联聊天上下文信息，提取特征时要解析到是用户主动表示或者主动认可的内容。
    #
    # #输出格式要求:
    # 请以JSON数据格式输出,不要输出其他内容。
    #
    # """

    agent_jojo_label = f"""
    #角色:
    你是一位经验丰富的用户画像整理专家。你的专长在于深入分析对话内容，精准提炼人物特征，并用简洁、清晰、逻辑严密的语言进行概括。

    #目标:
    请仔细阅读并分析以下提供的小朋友与AI角色“小鸡叫叫”之间的对话聊天记录。你的任务是梳理出对话中反映出的用户（即小朋友）的人物画像信息。

    #核心原则:
    在提取任何特征之前，请务必判断用户是否主动、明确地表达了喜欢、认可、不喜欢或反对等主观情绪。如果用户只是在进行正常聊天、客观陈述事实或描述行为，但没有明确表示主观态度，那么尽量不要提取与此相关的特征。只有当用户的主观态度清晰可辨时，才考虑将其归类到相应的特征类别中。

    #背景信息:
    对话参与者: 对话发生在小朋友和AI角色“小鸡叫叫”之间。聊天记录数据来源于他们的互动。
    小鸡叫叫的设定:
    基本信息: 叫叫是萌萌星的智慧生物，自然成长，非人工创造。他是个6岁的男性小鸡，团队里的队长。形象特点是穿红色披风（系成领结状）、头顶有呆毛、体型像芒果，看起来阳光可爱。
    性格: 勇敢、好奇、急性子、充满活力、积极乐观，是“小太阳”型孩子王。
    能力与特点: 擅长踢足球、喜欢爆米花、梦想成为超级大英雄。擅长阅读写作，数学较弱，学习不认真但有小聪明，反应快，成绩中游偏上，人缘极好，有很多友情故事。他持续输出正能量，用活力快乐感染他人，是小朋友们心中的小英雄和好朋友。虽然来自萌萌星，但对地球非常了解。
    昵称提醒: 用户在对话中可能用“娇娇”、“笑笑”、“佳佳”、“教教”、“舅舅”、“小鸡叫巧”、“小吉佳佳”等称呼小鸡叫叫，请留意这些词并识别它们指向的是叫叫。

    分析依据 (历史聊天记录):
    {jojo_label_input}

    #需要总结的画像信息及说明:
    第一步：评估对话质量
    请首先评估对话内容的整体清晰度和连贯性。如果对话内容存在以下情况，请直接跳过后续特征提取步骤，保持所有特征字段为空：
    1、语义不清晰，难以理解用户意图。
    2、聊天断断续续，缺乏有效内容。
    3、用户表达混乱，前后矛盾或无法形成完整句子。
    4、有效信息量极少，不足以支撑任何可靠的用户特征判断。
    第二步：特征提取（仅在对话质量评估为合格时执行）
    如果对话质量评估合格，请根据对话内容，提取以下信息。对于每个类别下的具体项，如果对话中明确体现了用户的特征，请填写对应的值；如果对话中没有相关信息或无法判断，请留空。
    提取的特征值除昵称、年龄、生日特征只能有一个值，其他特征如果有多个有效特征值，可以提取多个，但是不能超过5个，多个特征值中间用逗号隔开。
    如果需要提取的特征中显示是"封闭集合"，那么提取到的用户特征值必须为封闭集合的值，如果提取的用户特征不属于封闭集合值域的值，请填空。

    需要提取的特征如下：
    ● 基础信息:
    昵称: 用户希望AI如何称呼自己。
    年龄: 用户提及的自己的年龄。
    生日: 用户主动表述的自己的生日日期。必须包含具体的年、月、日三个要素，并且格式正确。如果用户只提及了生日是某一天（如“周五是我的生日”）、某个月或某个季节，或者格式不正确，请不提取此特征。

    聊天风格: 总结用户在对话中表现出的沟通方式特点，重点关注积极、友好、清晰或有趣的方面（如：活泼、热情、礼貌、表达清晰、想象力丰富等），风格内容应该简短。避免描述为负面或中性的特征，如“表述不连贯”、“语义模糊”、"表达不清晰"等，除非这些是用户明确自述或被广泛认可的核心沟通风格。
    语言技能: 指用户跟AI沟通时可以使用的语言，封闭集合，值域为：（英语、日语、俄语、法语、德语、西班牙语）
    ● 兴趣偏好:
    学科: 用户明确表示喜欢、正在积极学习或对其表现出浓厚兴趣的正式学校科目，仅仅是提及或被动提及相关活动（如“去听阅读了”）不足以作为“喜欢”该学科的依据。要用户主动表示喜欢某些科目才提取为特征，特征值为封闭集合，值域为：（语文、数学、英语、地理、历史、政治、音乐、美术、体育），所提取的特征值必须为值域集合中的值。
    运动: 用户表示喜欢或感兴趣的运动项目（如足球、篮球、网球等）,必须是常见的、通常被归类为体育竞技或身体锻炼范畴的项目。
    饮食偏好: 提取的食物名称必须清晰、具体，并且是大众普遍了解和接触过的食物（例如：苹果、巧克力、披萨、冰淇淋、炸鸡等），如果用户提到的食物名称不是常见的食物名称，或者食物名称模糊不清（例如：拧拧水、霸霸冰等）（有可能是用户口误、或者是ASR转义错误食物名称），一律不应提取为饮食偏好的特征值，这一点尤其重要，食物名称必须是常见、广泛认知的食物。其次，必须是用户主动表示喜欢的食物。
    饮食禁忌: 用户不喜欢或不能吃的食物，必须为真实且常见的食物名称。
    社交: 用户表示喜欢的社交活动类型,特征值的内容要简短。
    游玩: 用户明确表示喜欢的玩乐项目或在对话中用户明确对于某个玩乐项目比较感兴趣游乐，玩耍项目，以及用户表示喜欢的玩具等，注意如果用户参与某个活动，但是没有明确表达喜欢，不要轻易提取为用户特征。
    音乐: 用户表示喜欢的音乐类型（古典、流行、摇滚等）。
    虚拟IP: 用户明确表示喜欢的、广泛认知的动画、电影、小说等中的虚拟人物或IP名称。例如哪吒、喜羊羊、孙悟空等。也包括叫叫的朋友：猪小弟、铃铛、绿豆（Domi）、豆芽、粉豆、蓝豆、大红豆、Hatty、Elfie、Hackett、Allie、Sage等。用户必须主动表达喜爱或多次提及讨论。
    人物: 用户提及或表示喜欢的明星、企业家、历史人物、运动员、演员等具体的人物名称。用户必须明确表达出“喜欢”、“崇拜”、“想成为”等积极态度，或者多次主动提及并讨论该人物，才能将其提取为人物特征。仅仅一次提及名字，没有表达任何情感或态度，不足以提取。
    文学作品: 用户喜欢的小说、诗歌、戏剧等。
    艺术: 用户感兴趣的艺术形式（雕刻、绘画等）或艺术展览。
    影视: 用户表示喜欢的动画片、漫画、电影、电视剧、纪录片等。
    旅游: 用户提及喜欢的真实旅游目的地、实际旅行体验或旅行偏好（例如：喜欢去海边、喜欢去游乐园、去过某个城市等）。注意：纯虚构或幻想中的地点（如魔法森林、神秘星球等）不属于此范畴，请勿提取。
    动物: 用户表示喜欢的宠物或动物(在地球上真实存在的动物，也可以是在地球上存在过，但是已经灭绝的动物)。
    电子产品: 用户对手机、电脑、家电等电子产品的兴趣或使用情况。
    服装饰品: 用户对头发、衣服、背包挂饰等时尚元素的兴趣或偏好。

    #注意事项:
    1、准确性: 确保准确识别对话内容，特别是用户表达的信息。
    2、小朋友特征: 严格分析对话内容是否具有小朋友的特征。避免将叫叫的角色特征或与叫叫互动产生的通用反应误判为用户的个人特征。例如，用户对叫叫表现出友好是正常互动，但不一定是用户人缘好”的特征。
    3、空值处理: 对于无法从对话中提取信息的项目，请保持对应字段为空。
    4、名词要求: 提取值必须为名词，避免任何动词、形容词或描述性短语出现在提取结果中。
    5、认真分析对话，只有用户主动承认或主动表述或者用户主动认可的信息才可以提取为特征。用户未主动表达意愿的不要轻易提取为用户特征。
    6、聊天中如果涉及用户主动参与某个活动，玩的比较久，玩的比较开心，可以认为是用户主动喜欢，可以抽取相关的特种功能到用户。
    7、如果历史聊天内容语义不清晰，聊天断断续续，无法准确获取用户聊天内容，不用提取用户特征。只有语义清晰，用户主动表达喜欢和认可的内容中提取用户特征。
    8、提取的用户特征值必须要真实有效，符合真实值，如果小朋友聊的内容是莫须有或者不认识的东西或事物，不要提取到用户特征中。
    9、如果是对话中的临时性互动、游戏或客套话，要避免提取特征。
    10、认真分析用户与AI的对话内容，关联聊天上下文信息，提取特征时要解析到是用户主动表示或者主动认可的内容。
    11、提取用户饮食偏好与饮食禁忌时，一定要判断食物是否为常见的食物，只要不是常见的食物，一定不能提取为饮食偏好或饮食禁忌。

    #输出格式要求:
    请以JSON数据格式输出,不要输出其他内容。

    """
    return agent_jojo_label


# 新旧标签合并的prompt:
# old_user_tag = ''
# new_user_tag = ''
# user_tag_structure="""
# {
#     "基础信息": {
#         "昵称": "",
#         "年龄": "",
#         "生日": "",
#         "聊天风格": "",
#         "语言技能": ""
#     },
#     "兴趣偏好": {
#         "学科": "",
#         "运动": "",
#         "饮食偏好": "",
#         "饮食禁忌": "",
#         "社交": "",
#         "游玩": "",
#         "音乐": "",
#         "虚拟IP": "",
#         "人物": "",
#         "文学作品": "",
#         "艺术": "",
#         "影视": "",
#         "旅游": "",
#         "动物": "",
#         "电子产品": "",
#         "服装饰品": ""
#     }
# }
# """
# (old_user_tag,new_user_tag,user_tag_structure)
def get_pe_agent_jojo_label_merge(input):
    old_user_tag = input[0]
    new_user_tag = input[1]
    user_tag_structure = input[2]
    # agent_jojo_label_merge = f"""
    # 角色部分:
    # 你是一个专业的用户画像分析专家，擅长处理和分析用户数据，能够根据既定的规则和结构，将新旧用户画像特征进行智能合并与优化。
    #
    # 目标:
    # 请将提供的旧用户画像特征与新的用户画像特征，按照下面指定的用户特征结构、特征说明以及合并要求，合并生成一个最终的用户特征结构。最终输出应为符合指定输出模板的 JSON 结构。
    #
    # 用户画像特征结构与特征说明如下：
    # ● 基础信息:
    # 昵称: 用户希望AI如何称呼自己。
    # 年龄: 用户提及的自己的年龄。
    # 生日: 用户提及的自己的生日。
    # 聊天风格: 总结用户在对话中表现出的沟通方式特点（如：活泼、内向、礼貌、直白、积极、主动等）。
    # 语言技能: 指用户跟AI沟通时可以使用的语言，封闭集合，值域为：（英语、日语、俄语、法语、德语、西班牙语）
    # ● 兴趣偏好:
    # 学科: 用户表现出兴趣或正在学习的学校科目，封闭集合，值域为：（语文、数学、英语、地理、历史、政治、音乐、美术、体育）。
    # 运动: 用户喜欢或感兴趣的运动项目（如足球、篮球、网球等）。
    # 饮食偏好: 用户主动表示或承认喜欢的食物。
    # 饮食禁忌: 用户主动表示不喜欢或不能吃的食物。
    # 社交: 用户喜欢的社交活动类型。
    # 游玩: 用户喜欢的玩乐项目（如桌游、手工、积木等）。
    # 音乐: 用户喜欢的音乐类型（古典、流行、摇滚等）。
    # 虚拟IP: 用户喜欢的动画、电影、小说等中的虚拟人物或动物IP名称（如哪吒、喜羊羊、孙悟空等）。
    # 人物: 用户提及或表示喜欢的明星、企业家、历史人物、运动员、演员等。
    # 文学作品: 用户喜欢的小说、诗歌、戏剧等。
    # 艺术: 用户感兴趣的艺术形式（雕刻、绘画等）或艺术展览。
    # 影视: 用户喜欢的动画片、漫画、电影、电视剧、纪录片等。
    # 旅游: 用户提及的地球上真实的旅游目的地或旅行体验偏好。
    # 动物: 用户对宠物相关话题（如猫、狗、鸟类等）的兴趣。
    # 电子产品: 用户对手机、电脑、家电等电子产品的兴趣或使用情况。
    # 服装饰品: 用户对头发、衣服、背包挂饰等时尚元素的兴趣或偏好。
    #
    # 特征说明与合并要求:
    # 1、昵称、年龄、生日: 在旧和新特征中，只保留一个值，优先选择新的特征值。
    # 2、合并时，先将新的特征值追加到旧的特征值列表中。
    # 3、对于每个特征，最终合并后的值列表（包括旧的和新的）最多保留五个值，值之间用逗号分隔。
    # 4、优先选择保留新的特征值。如果合并后的列表超过五个值，则需要删除旧的特征值列表中特征不明显的值，然后将新的特征值追加进去。
    # 5、合并时要判断新的特征值中的值是否合理，如果新的特征值不符合特征说明则不去追加。
    # 6、如果特征是封闭集合，那么新的特征与旧的特征必须符合封闭集合的值域。不符合的值不要追加到特征中去。
    # 7、如果新的特征值与旧的特征值是同一个特征内容，但是描述不同（例如，旧特征值为“足球”，新特征值为“喜欢踢足球”），则合并为一个特征值追加到最终列表中。
    #
    # 输出结构:
    # 输出最终用户特征结构是json结构。输出最终按照合并要求合并后的最新的用户特征结构。输出最终数据结构要遵循下面给出的“输出用户特征结构”模板。
    #
    # 旧的用户画像特征：
    # {old_user_tag}
    #
    # 新的用户画像特征：
    # {new_user_tag}
    #
    # 最终输出的用户特征结构：
    # {user_tag_structure}
    #
    # 请根据以上所有信息，完成新旧用户画像特征的合并，并输出最终的 JSON 格式的用户特征结构。"""
    # agent_jojo_label_merge = f"""
    # 角色部分:
    # 你是一个专业的用户画像分析专家，擅长处理和分析用户数据，能够根据既定的规则和结构，将新旧用户画像特征进行智能合并与优化。
    #
    # 目标:
    # 请将提供的旧用户画像特征与新的用户画像特征，按照下面指定的用户特征结构、特征说明以及合并要求，合并生成一个最终的用户特征结构。最终输出应为符合指定输出模板的 JSON 结构。
    #
    # 用户画像特征结构与特征说明如下：
    # ● 基础信息:
    # 昵称: 用户希望AI如何称呼自己。
    # 年龄: 用户提及的自己的年龄。
    # 生日: 用户主动表述的自己的生日日期。必须包含具体的年、月、日三个要素，并且格式正确。如果用户只提及了生日是某一天（如“周五是我的生日”）、某个月或某个季节，或者格式不正确，请不提取此特征。
    #
    # 聊天风格: 总结用户在对话中表现出的沟通方式特点，重点关注积极、友好、清晰或有趣的方面（如：活泼、热情、礼貌、表达清晰、想象力丰富等），风格内容应该简短。避免描述为负面或中性的特征，如“表述不连贯”、“语义模糊”、"表达不清晰"等，除非这些是用户明确自述或被广泛认可的核心沟通风格。
    # 语言技能: 指用户跟AI沟通时可以使用的语言，封闭集合，值域为：（英语、日语、俄语、法语、德语、西班牙语）
    # ● 兴趣偏好:
    # 学科: 用户明确表示喜欢、正在积极学习或对其表现出浓厚兴趣的正式学校科目，仅仅是提及或被动提及相关活动（如“去听阅读了”）不足以作为“喜欢”该学科的依据。要用户主动表示喜欢某些科目才提取为特征，特征值为封闭集合，值域为：（语文、数学、英语、地理、历史、政治、音乐、美术、体育），所提取的特征值必须为值域集合中的值。
    # 运动: 用户表示喜欢或感兴趣的运动项目（如足球、篮球、网球等）,必须是常见的、通常被归类为体育竞技或身体锻炼范畴的项目。
    # 饮食偏好: 用户主动表示喜欢的食物，必须为常见的，广泛认知的真实的食物名称，用户主动表示喜欢，并且食物名称清晰、可识别。避免提取过于模糊、自创或无法明确指向具体食物的食物名称。
    # 饮食禁忌: 用户不喜欢或不能吃的食物，必须为真实且常见的食物名称。
    # 社交: 用户表示喜欢的社交活动类型,特征值的内容要简短。
    # 游玩: 用户明确表示喜欢的玩乐项目或在对话中用户明确对于某个玩乐项目比较感兴趣游乐，玩耍项目，以及用户表示喜欢的玩具等，注意如果用户参与某个活动，但是没有明确表达喜欢，不要轻易提取为用户特征。
    # 音乐: 用户表示喜欢的音乐类型（古典、流行、摇滚等）。
    # 虚拟IP: 用户明确表示喜欢的、广泛认知的动画、电影、小说等中的虚拟人物或IP名称。例如哪吒、喜羊羊、孙悟空等。也包括叫叫的朋友：猪小弟、铃铛、绿豆（Domi）、豆芽、粉豆、蓝豆、大红豆、Hatty、Elfie、Hackett、Allie、Sage等。用户必须主动表达喜爱或多次提及讨论。
    # 人物: 用户提及或表示喜欢的明星、企业家、历史人物、运动员、演员等具体的人物名称。用户必须明确表达出“喜欢”、“崇拜”、“想成为”等积极态度，或者多次主动提及并讨论该人物，才能将其提取为人物特征。仅仅一次提及名字，没有表达任何情感或态度，不足以提取。
    # 文学作品: 用户喜欢的小说、诗歌、戏剧等。
    # 艺术: 用户感兴趣的艺术形式（雕刻、绘画等）或艺术展览。
    # 影视: 用户表示喜欢的动画片、漫画、电影、电视剧、纪录片等。
    # 旅游: 用户提及喜欢的真实旅游目的地、实际旅行体验或旅行偏好（例如：喜欢去海边、喜欢去游乐园、去过某个城市等）。注意：纯虚构或幻想中的地点（如魔法森林、神秘星球等）不属于此范畴，请勿提取。
    # 动物: 用户表示喜欢的宠物或动物(在地球上真实存在的动物，也可以是在地球上存在过，但是已经灭绝的动物)。
    # 电子产品: 用户对手机、电脑、家电等电子产品的兴趣或使用情况。
    # 服装饰品: 用户对头发、衣服、背包挂饰等时尚元素的兴趣或偏好。
    #
    # 特征说明与合并要求:
    # 1、昵称、年龄、生日: 在旧和新特征中，只保留一个值，优先选择新的特征值。
    # 2、合并时，先将新的特征值追加到旧的特征值列表中。
    # 3、对于每个特征，最终合并后的值列表（包括旧的和新的）最多保留五个值，值之间用逗号分隔。
    # 4、优先选择保留新的特征值。如果合并后的列表超过五个值，则需要删除旧的特征值列表中特征不明显的值，然后将新的特征值追加进去。
    # 5、合并时要判断新的特征值中的值是否合理，如果新的特征值不符合特征说明则不去追加。
    # 6、如果特征是封闭集合，那么新的特征与旧的特征必须符合封闭集合的值域。不符合的值不要追加到特征中去。
    # 7、如果新的特征值与旧的特征值是同一个特征内容，但是描述不同（例如，旧特征值为“足球”，新特征值为“喜欢踢足球”），则合并为一个特征值追加到最终列表中。
    # 8、如果新的特征值和旧的特征值均为空，则也要返回对应的结构，特征值为空。
    #
    # 输出结构:
    # 输出最终用户特征结构是json结构。输出最终按照合并要求合并后的最新的用户特征结构。输出最终数据结构要遵循下面给出的“输出用户特征结构”模板。
    #
    # 旧的用户画像特征：
    # {old_user_tag}
    #
    # 新的用户画像特征：
    # {new_user_tag}
    #
    # 最终输出的用户特征结构：
    # {user_tag_structure}
    #
    # 请根据以上所有信息，完成新旧用户画像特征的合并，并输出最终的 JSON 格式的用户特征结构。
    #
    # """

    # agent_jojo_label_merge = f"""
    # 角色部分:
    # 你是一个专业的用户画像分析专家，擅长处理和分析用户数据，能够根据既定的规则和结构，将新旧用户画像特征进行智能合并与优化。
    #
    # 目标:
    # 请将提供的旧用户画像特征与新的用户画像特征，按照下面指定的用户特征结构、特征说明以及合并要求，合并生成一个最终的用户特征结构。最终输出应为符合指定输出模板的 JSON 结构。
    #
    # 用户画像特征结构与特征说明如下：
    # ● 基础信息:
    # 昵称: 用户希望AI如何称呼自己。
    # 年龄: 用户提及的自己的年龄。
    # 生日: 用户主动表述的自己的生日日期。必须包含具体的年、月、日三个要素，并且格式正确。如果用户只提及了生日是某一天（如“周五是我的生日”）、某个月或某个季节，或者格式不正确，请不提取此特征。
    #
    # 聊天风格: 总结用户在对话中表现出的沟通方式特点，重点关注积极、友好、清晰或有趣的方面（如：活泼、热情、礼貌、表达清晰、想象力丰富等），风格内容应该简短。避免描述为负面或中性的特征，如“表述不连贯”、“语义模糊”、"表达不清晰"等，除非这些是用户明确自述或被广泛认可的核心沟通风格。
    # 语言技能: 指用户跟AI沟通时可以使用的语言，封闭集合，值域为：（英语、日语、俄语、法语、德语、西班牙语）
    # ● 兴趣偏好:
    # 学科: 用户明确表示喜欢、正在积极学习或对其表现出浓厚兴趣的正式学校科目，仅仅是提及或被动提及相关活动（如“去听阅读了”）不足以作为“喜欢”该学科的依据。要用户主动表示喜欢某些科目才提取为特征，特征值为封闭集合，值域为：（语文、数学、英语、地理、历史、政治、音乐、美术、体育），所提取的特征值必须为值域集合中的值。
    # 运动: 用户表示喜欢或感兴趣的运动项目（如足球、篮球、网球等）,必须是常见的、通常被归类为体育竞技或身体锻炼范畴的项目。
    # 饮食偏好: 提取的食物名称必须清晰、具体，并且是大众普遍了解和接触过的食物（例如：苹果、巧克力、披萨、冰淇淋、炸鸡等），如果用户提到的食物名称不是常见的食物名称，或者食物名称模糊不清（例如：拧拧水、霸霸冰等）（有可能是用户口误、或者是ASR转义错误食物名称），一律不应提取为饮食偏好的特征值，这一点尤其重要，食物名称必须是常见、广泛认知的食物。其次，必须是用户主动表示喜欢的食物。
    # 饮食禁忌: 用户不喜欢或不能吃的食物，必须为真实且常见的食物名称。
    # 社交: 用户表示喜欢的社交活动类型,特征值的内容要简短。
    # 游玩: 用户明确表示喜欢的玩乐项目或在对话中用户明确对于某个玩乐项目比较感兴趣游乐，玩耍项目，以及用户表示喜欢的玩具等，注意如果用户参与某个活动，但是没有明确表达喜欢，不要轻易提取为用户特征。
    # 音乐: 用户表示喜欢的音乐类型（古典、流行、摇滚等）。
    # 虚拟IP: 用户明确表示喜欢的、广泛认知的动画、电影、小说等中的虚拟人物或IP名称。例如哪吒、喜羊羊、孙悟空等。也包括叫叫的朋友：猪小弟、铃铛、绿豆（Domi）、豆芽、粉豆、蓝豆、大红豆、Hatty、Elfie、Hackett、Allie、Sage等。用户必须主动表达喜爱或多次提及讨论。
    # 人物: 用户提及或表示喜欢的明星、企业家、历史人物、运动员、演员等具体的人物名称。用户必须明确表达出“喜欢”、“崇拜”、“想成为”等积极态度，或者多次主动提及并讨论该人物，才能将其提取为人物特征。仅仅一次提及名字，没有表达任何情感或态度，不足以提取。
    # 文学作品: 用户喜欢的小说、诗歌、戏剧等。
    # 艺术: 用户感兴趣的艺术形式（雕刻、绘画等）或艺术展览。
    # 影视: 用户表示喜欢的动画片、漫画、电影、电视剧、纪录片等。
    # 旅游: 用户提及喜欢的真实旅游目的地、实际旅行体验或旅行偏好（例如：喜欢去海边、喜欢去游乐园、去过某个城市等）。注意：纯虚构或幻想中的地点（如魔法森林、神秘星球等）不属于此范畴，请勿提取。
    # 动物: 用户表示喜欢的宠物或动物(在地球上真实存在的动物，也可以是在地球上存在过，但是已经灭绝的动物)。
    # 电子产品: 用户对手机、电脑、家电等电子产品的兴趣或使用情况。
    # 服装饰品: 用户对头发、衣服、背包挂饰等时尚元素的兴趣或偏好。
    #
    # 特征说明与合并要求:
    # 1、昵称、年龄、生日: 在旧和新特征中，只保留一个值，优先选择新的特征值。
    # 2、合并时，先要判断新的特征值是否符合特征说明，如果符合再合并到旧的特征值列表中，否则不要合并。。
    # 3、对于每个特征，最终合并后的值列表（包括旧的和新的）最多保留五个值，值之间用逗号分隔。
    # 4、优先选择保留新的特征值。如果合并后的列表超过五个值，则需要删除旧的特征值列表中特征不明显的值，然后将新的特征值追加进去。
    # 5、合并时要判断新的特征值中的值是否合理，如果新的特征值不符合特征说明则不去追加。
    # 6、如果特征是封闭集合，那么新的特征与旧的特征必须符合封闭集合的值域。不符合的值不要追加到特征中去。
    # 7、如果新的特征值与旧的特征值是同一个特征内容，但是描述不同（例如，旧特征值为“足球”，新特征值为“喜欢踢足球”），则合并为一个特征值追加到最终列表中。
    # 8、如果新的特征值和旧的特征值均为空，则也要返回对应的结构，特征值为空。
    #
    # 输出结构:
    # 输出最终用户特征结构是json结构。输出最终按照合并要求合并后的最新的用户特征结构。输出最终数据结构要遵循下面给出的“输出用户特征结构”模板。
    #
    # 旧的用户画像特征：
    # {old_user_tag}
    #
    # 新的用户画像特征：
    # {new_user_tag}
    #
    # 最终输出的用户特征结构：
    # {user_tag_structure}
    #
    # 请根据以上所有信息，完成新旧用户画像特征的合并，并输出最终的 JSON 格式的用户特征结构。
    #
    # """

    agent_jojo_label_merge = f"""
    角色部分:
    你是一个专业的用户画像分析专家，擅长处理和分析用户数据，能够根据既定的规则和结构，将新旧用户画像特征进行智能合并与优化。

    目标:
    请将提供的旧用户画像特征与新的用户画像特征，按照下面指定的用户特征结构、特征说明以及合并要求，合并生成一个最终的用户特征结构。最终输出应为符合指定输出模板的 JSON 结构。在合并过程中，严格遵循特征合并规则，对于基础信息中的 “昵称”、“年龄”、“生日” 三个特征，当新值为空时，要保留旧值

    用户画像特征结构与特征说明如下：
    ● 基础信息:
    昵称: 用户希望AI如何称呼自己。
    年龄: 用户提及的自己的年龄。
    生日: 用户主动表述的自己的生日日期。必须包含具体的年、月、日三个要素，并且格式正确。如果用户只提及了生日是某一天（如“周五是我的生日”）、某个月或某个季节，或者格式不正确，请不提取此特征。

    聊天风格: 总结用户在对话中表现出的沟通方式特点，重点关注积极、友好、清晰或有趣的方面（如：活泼、热情、礼貌、表达清晰、想象力丰富等），风格内容应该简短。避免描述为负面或中性的特征，如“表述不连贯”、“语义模糊”、"表达不清晰"等，除非这些是用户明确自述或被广泛认可的核心沟通风格。
    语言技能: 指用户跟AI沟通时可以使用的语言，封闭集合，值域为：（英语、日语、俄语、法语、德语、西班牙语）
    ● 兴趣偏好:
    学科: 用户明确表示喜欢、正在积极学习或对其表现出浓厚兴趣的正式学校科目，仅仅是提及或被动提及相关活动（如“去听阅读了”）不足以作为“喜欢”该学科的依据。要用户主动表示喜欢某些科目才提取为特征，特征值为封闭集合，值域为：（语文、数学、英语、地理、历史、政治、音乐、美术、体育），所提取的特征值必须为值域集合中的值。
    运动: 用户表示喜欢或感兴趣的运动项目（如足球、篮球、网球等）,必须是常见的、通常被归类为体育竞技或身体锻炼范畴的项目。
    饮食偏好: 提取的食物名称必须清晰、具体，并且是大众普遍了解和接触过的食物（例如：苹果、巧克力、披萨、冰淇淋、炸鸡等），如果用户提到的食物名称不是常见的食物名称，或者食物名称模糊不清（例如：拧拧水、霸霸冰等）（有可能是用户口误、或者是ASR转义错误食物名称），一律不应提取为饮食偏好的特征值，这一点尤其重要，食物名称必须是常见、广泛认知的食物。其次，必须是用户主动表示喜欢的食物。
    饮食禁忌: 用户不喜欢或不能吃的食物，必须为真实且常见的食物名称。
    社交: 用户表示喜欢的社交活动类型,特征值的内容要简短。
    游玩: 用户明确表示喜欢的玩乐项目或在对话中用户明确对于某个玩乐项目比较感兴趣游乐，玩耍项目，以及用户表示喜欢的玩具等，注意如果用户参与某个活动，但是没有明确表达喜欢，不要轻易提取为用户特征。
    音乐: 用户表示喜欢的音乐类型（古典、流行、摇滚等）。
    虚拟IP: 用户明确表示喜欢的、广泛认知的动画、电影、小说等中的虚拟人物或IP名称。例如哪吒、喜羊羊、孙悟空等。也包括叫叫的朋友：猪小弟、铃铛、绿豆（Domi）、豆芽、粉豆、蓝豆、大红豆、Hatty、Elfie、Hackett、Allie、Sage等。用户必须主动表达喜爱或多次提及讨论。
    人物: 用户提及或表示喜欢的明星、企业家、历史人物、运动员、演员等具体的人物名称。用户必须明确表达出“喜欢”、“崇拜”、“想成为”等积极态度，或者多次主动提及并讨论该人物，才能将其提取为人物特征。仅仅一次提及名字，没有表达任何情感或态度，不足以提取。
    文学作品: 用户喜欢的小说、诗歌、戏剧等。
    艺术: 用户感兴趣的艺术形式（雕刻、绘画等）或艺术展览。
    影视: 用户表示喜欢的动画片、漫画、电影、电视剧、纪录片等。
    旅游: 用户提及喜欢的真实旅游目的地、实际旅行体验或旅行偏好（例如：喜欢去海边、喜欢去游乐园、去过某个城市等）。注意：纯虚构或幻想中的地点（如魔法森林、神秘星球等）不属于此范畴，请勿提取。
    动物: 用户表示喜欢的宠物或动物(在地球上真实存在的动物，也可以是在地球上存在过，但是已经灭绝的动物)。
    电子产品: 用户对手机、电脑、家电等电子产品的兴趣或使用情况。
    服装饰品: 用户对头发、衣服、背包挂饰等时尚元素的兴趣或偏好。


    特征说明与合并要求:

    合并步骤：
    第一步：检查新特征值。 对于每个特征，首先检查新的用户画像特征中该特征的值。
    第二步：处理新值。 判断新的特征值是否符合该特征的“特征说明”。
    如果新值符合特征说明：
    如果该特征是封闭集合，检查新值是否在允许的值域内。如果不在，则忽略此新值。
    如果新值在值域内或该特征不是封闭集合，则准备将其合并。
    如果新值不符合特征说明，则忽略此新值。
    第三步：合并旧值。 检查旧的用户画像特征中该特征的值。
    如果旧值存在且不为空，则将其加入合并列表。
    第四步：处理重复与合并。 检查新值（如果符合要求被保留）与旧值（如果存在）是否是同一内容的不同描述（例如，旧值“足球”，新值“喜欢踢足球”）。如果是，则合并为一个统一的描述（如“足球”）加入列表。
    第五步：限制列表长度。 合并后的值列表（包括旧的和新的、处理过重复的值）如果超过五个值，则需要删除旧的特征值列表中特征不明显的值（例如，描述模糊、积极性不强的值），直到列表长度不超过五个，然后将新的、符合要求的特征值追加进去。

    优先级规则：
    对于基础信息中的 “昵称”、“年龄”、“生日” 三个特征，在旧和新特征中，严格优先选择新的特征值。若新值为空，则保留旧值。
    对于其他所有特征：
    情况一：新值符合特征说明且不为空。 将新值优先加入最终列表。然后，如果旧值存在且不为空，也将其加入列表。合并后检查列表长度，按第五步处理。
    情况二：新值不符合特征说明或为空。 则直接保留旧值（如果旧值存在且不为空）。如果旧值也为空，则该特征最终为空。
    特殊情况： 如果新的特征值和旧的特征值均为空，则该特征最终为空。
    封闭集合检查： 对于所有属于封闭集合的特征，在合并新旧值后，必须确保最终列表中的所有值都在其规定的值域内。不符合值域的值应被移除。

    输出结构:
    输出最终用户特征结构是json结构。输出最终按照合并要求合并后的最新的用户特征结构。输出最终数据结构要遵循下面给出的“输出用户特征结构”模板。

    旧的用户画像特征：
    {old_user_tag}

    新的用户画像特征：
    {new_user_tag}

    最终输出的用户特征结构：
    {user_tag_structure}

    请根据以上所有信息，完成新旧用户画像特征的合并，并输出最终的 JSON 格式的用户特征结构。

    """

    return agent_jojo_label_merge